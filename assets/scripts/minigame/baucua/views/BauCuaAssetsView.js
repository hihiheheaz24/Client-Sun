/*
 * Generated by BeChicken
 * on 11/13/2019
 * version v1.0
 */
(function () {
    cc.BauCuaAssetsView = cc.Class({
        extends: cc.Component,
        properties: {
            sfDices: [cc.SpriteFrame],//spriteFrame cua quan vi
            prefabChip: cc.Prefab,//0:1K,1:5K,2:10K,3:50k,4:100K,5:500K,6:1M
            spriteFrameChips: [cc.SpriteFrame],
            sfNan: [cc.SpriteFrame],
            sfDicesHistory: [cc.SpriteFrame]
        },
        onLoad: function () {
            cc.BauCuaController.getInstance().setAssetView(this);
            this.chip100Pool = new cc.NodePool();
            this.chip500Pool = new cc.NodePool();
            this.chip1kPool = new cc.NodePool();
            this.chip5kPool = new cc.NodePool();
            this.chip10kPool = new cc.NodePool();
            this.chip50kPool = new cc.NodePool();
            this.chip100kPool = new cc.NodePool();
            this.chip500kPool = new cc.NodePool();
            this.chip1mPool = new cc.NodePool();
        },
        onDestroy: function () {
            this.clearPools();
        },
        clearPools: function () {
            try {
                //Clear pool
                this.chip100Pool.clear();
                this.chip500Pool.clear();
                this.chip1kPool.clear();
                this.chip5kPool.clear();
                this.chip10kPool.clear();
                this.chip50kPool.clear();
                this.chip100kPool.clear();
                this.chip500kPool.clear();
                this.chip1mPool.clear();
            } catch (e) {
                console.log(e);
            }
        },
        createChip: function (type) {
            let nodeChip = null;
            let index = -1;
            switch (type) {
                case cc.BauCuaMapChip['100']:
                    if (this.chip100Pool.size() > 0) {
                        nodeChip = this.chip100Pool.get();
                    } else {
                        nodeChip = cc.instantiate(this.prefabChip);
                    }
                    index = 0;
                    break;
                case cc.BauCuaMapChip['500']:
                    if (this.chip500Pool.size() > 0) {
                        nodeChip = this.chip500Pool.get();
                    } else {
                        nodeChip = cc.instantiate(this.prefabChip);
                    }
                    index = 1;
                    break;
                case cc.BauCuaMapChip['1K']:
                    if (this.chip1kPool.size() > 0) {
                        nodeChip = this.chip1kPool.get();
                    } else {
                        nodeChip = cc.instantiate(this.prefabChip);
                    }
                    index = 2;
                    break;
                case cc.BauCuaMapChip['5K']:
                    if (this.chip5kPool.size() > 0) {
                        nodeChip = this.chip5kPool.get();
                    } else {
                        nodeChip = cc.instantiate(this.prefabChip);
                    }
                    index = 3;
                    break;
                case cc.BauCuaMapChip['10K']:
                    if (this.chip10kPool.size() > 0) {
                        nodeChip = this.chip10kPool.get();
                    } else {
                        nodeChip = cc.instantiate(this.prefabChip);
                    }
                    index = 4;
                    break;
                case cc.BauCuaMapChip['50K']:
                    if (this.chip50kPool.size() > 0) {
                        nodeChip = this.chip50kPool.get();
                    } else {
                        nodeChip = cc.instantiate(this.prefabChip);
                    }
                    index = 5;
                    break;
                case cc.BauCuaMapChip['100K']:
                    if (this.chip100kPool.size() > 0) {
                        nodeChip = this.chip100kPool.get();
                    } else {
                        nodeChip = cc.instantiate(this.prefabChip);
                    }
                    index = 6;
                    break;
                case cc.BauCuaMapChip['500K']:
                    if (this.chip500kPool.size() > 0) {
                        nodeChip = this.chip500kPool.get();
                    } else {
                        nodeChip = cc.instantiate(this.prefabChip);
                    }
                    index = 7;
                    break;
                case cc.BauCuaMapChip['1M']:
                    if (this.chip1mPool.size() > 0) {
                        nodeChip = this.chip1mPool.get();
                    } else {
                        nodeChip = cc.instantiate(this.prefabChip);
                    }
                    index = 8;
                    break;
            }
            if (nodeChip) {
                nodeChip.getComponent(cc.Sprite).spriteFrame = this.spriteFrameChips[index];
            }

            try {
                // nodeChip.setScale(0.7, 0.7);
            } catch (e) {
                console.log(e);
                this.createChip(type);
            }

            return nodeChip;
        },
        putChipToPool: function (nodeChip, betValue) {
            switch (betValue) {
                case 100:
                    this.chip100Pool.put(nodeChip);
                    break;
                case 500:
                    this.chip500Pool.put(nodeChip);
                    break;
                case 1000:
                    this.chip1kPool.put(nodeChip);
                    break;
                case 5000:
                    this.chip5kPool.put(nodeChip);
                    break;
                case 10000:
                    this.chip10kPool.put(nodeChip);
                    break;
                case 50000:
                    this.chip50kPool.put(nodeChip);
                    break;
                case 100000:
                    this.chip100kPool.put(nodeChip);
                    break;
                case 500000:
                    this.chip500kPool.put(nodeChip);
                    break;
                case 1000000:
                    this.chip1mPool.put(nodeChip);
                    break;
            }
        },
        //Lay spriteFrame nan
        getSfNan: function (isNan) {
            if (isNan) {
                return this.sfNan[0]
            } else {
                return this.sfNan[1];
            }
        },
        //Lay spriteFrame Dice
        getSfDice: function (indexDice) {
            return this.sfDices[indexDice];
        },

        //Lay spriteFrame Dice
        getSfDiceHistory: function (indexDice) {
            return this.sfDicesHistory[indexDice];
        }

    });
}).call(this);